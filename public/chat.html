<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="description" content="RoundChat - Secure, lightning-fast real-time chat with modern aesthetics.">
	<title>RoundChat - Connecting people instantly</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
	<style>
		:root {
			--bg-color: #f8fafc;
			--chat-bg: #ffffff;
			--primary-color: #64748b;
			--text-color: #1e293b;
			--border-color: #e2e8f0;
			--accent-h1: #6366f1;
			--accent-ui: #f1f5f9;
			--msg-bg: #f8fafc;
			--header-bg: rgba(255, 255, 255, 0.85);
			--input-bg: #ffffff;
			--shadow-color: rgba(99, 102, 241, 0.05);
			--radius-lg: 16px;
			--radius-md: 12px;
			--radius-sm: 8px;
		}

		:root.dark {
			--bg-color: #0f172a;
			--chat-bg: #1e293b;
			--primary-color: #94a3b8;
			--text-color: #f1f5f9;
			--border-color: #334155;
			--accent-h1: #818cf8;
			--accent-ui: #334155;
			--msg-bg: #0f172a;
			--header-bg: rgba(15, 23, 42, 0.85);
			--input-bg: #0f172a;
			--shadow-color: rgba(0, 0, 0, 0.3);
		}

		html {
			margin: 0;
			padding: 0;
			height: 100%;
		}

		body {
			height: 100vh;
			height: -webkit-fill-available;
			margin: 0;
			padding: 0;
			font-family: 'Outfit', sans-serif;
			font-size: 16px;
			color: var(--text-color);
			display: flex;
			flex-direction: column;
			background: var(--bg-color);
			transition: background 0.3s;
			overflow: hidden;
		}

		/* Modern Buttons */
		button {
			background: var(--accent-h1);
			color: white;
			border: none;
			border-radius: var(--radius-sm);
			padding: 10px 18px;
			font-weight: 600;
			cursor: pointer;
			transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 8px;
			font-size: 0.9em;
		}

		button:hover {
			filter: brightness(1.1);
			transform: translateY(-1px);
			box-shadow: 0 4px 12px var(--shadow-color);
		}

		button:active {
			transform: translateY(0);
		}

		#signout-btn {
			background: transparent;
			border: 1px solid rgba(255, 255, 255, 0.3);
			padding: 6px 12px;
		}

		/* Room Selection Screen */
		#room-selection {
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			padding: 24px;
			gap: 24px;
		}

		#room-selection h1 {
			font-weight: 700;
			font-size: 3em;
			margin: 0;
			background: linear-gradient(135deg, var(--accent-h1), #ec4899);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			letter-spacing: -1px;
		}

		#room-selection-form {
			display: flex;
			flex-direction: column;
			gap: 16px;
			width: 100%;
			max-width: 360px;
		}

		#room-selection input {
			padding: 16px 20px;
			border: 1px solid var(--border-color);
			border-radius: var(--radius-lg);
			background: var(--chat-bg);
			color: var(--text-color);
			font-size: 1.1em;
			box-shadow: 0 4px 6px -1px var(--shadow-color);
			transition: all 0.2s;
			text-align: center;
		}

		#room-selection input:focus {
			outline: none;
			border-color: var(--accent-h1);
			box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
		}

		/* Main Chat UI */
		#chat-interface {
			display: none;
			flex: 1;
			flex-direction: column;
			height: 100vh;
			max-width: 1000px;
			margin: 0 auto;
			width: 100%;
			background: var(--chat-bg);
			box-shadow: 0 0 40px var(--shadow-color);
			position: relative;
			overflow: hidden;
		}

		header {
			flex: 0 0 auto;
			padding: 16px 24px;
			background: var(--header-bg);
			backdrop-filter: blur(12px);
			-webkit-backdrop-filter: blur(12px);
			display: flex;
			justify-content: space-between;
			align-items: center;
			border-bottom: 1px solid var(--border-color);
			z-index: 10;
		}

		header h1 {
			margin: 0;
			font-size: 1.2em;
			font-weight: 700;
			color: var(--text-color);
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.room-info {
			font-size: 0.85em;
			display: flex;
			align-items: center;
			gap: 12px;
			color: var(--primary-color);
		}

		.room-info span {
			background: var(--accent-ui);
			padding: 4px 8px;
			border-radius: 6px;
			font-weight: 600;
			color: var(--accent-h1);
		}

		#online-users {
			padding: 10px 24px;
			display: flex;
			gap: 8px;
			overflow-x: auto;
			background: var(--bg-color);
			border-bottom: 1px solid var(--border-color);
			scrollbar-width: none;
		}

		#online-users::-webkit-scrollbar {
			display: none;
		}

		.user-tag {
			background: var(--chat-bg);
			border: 1px solid var(--border-color);
			padding: 4px 12px;
			border-radius: 20px;
			font-size: 0.8em;
			font-weight: 500;
			white-space: nowrap;
			color: var(--text-color);
			display: flex;
			align-items: center;
			gap: 6px;
		}

		.user-tag::before {
			content: '';
			width: 6px;
			height: 6px;
			background: #22c55e;
			border-radius: 50%;
		}

		/* Message List */
		ul#messages {
			flex: 1;
			overflow-y: auto;
			padding: 24px;
			margin: 0;
			list-style: none;
			display: flex;
			flex-direction: column;
			gap: 16px;
			background: var(--bg-color);
		}

		ul#messages li {
			padding: 12px 18px;
			border-radius: var(--radius-lg);
			max-width: 80%;
			position: relative;
			line-height: 1.5;
			font-size: 0.95em;
			box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
			animation: messageIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
		}

		@keyframes messageIn {
			from {
				opacity: 0;
				transform: translateY(10px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		li.message-other {
			align-self: flex-start;
			background: var(--chat-bg);
			color: var(--text-color);
			border-bottom-left-radius: 4px;
		}

		li.message-mine {
			align-self: flex-end;
			background: var(--accent-h1);
			color: white;
			border-bottom-right-radius: 4px;
		}

		li b {
			display: block;
			font-size: 0.75em;
			margin-bottom: 4px;
			font-weight: 700;
			text-transform: uppercase;
			letter-spacing: 0.5px;
		}

		li.message-other b {
			color: var(--accent-h1);
		}

		li.message-mine b {
			color: rgba(255, 255, 255, 0.8);
		}

		/* Footer / Form */
		#chat-form-container {
			padding: 16px 24px;
			background: var(--chat-bg);
			border-top: 1px solid var(--border-color);
			display: flex;
			flex-direction: column;
			gap: 8px;
		}

		#chat-form {
			display: flex;
			gap: 12px;
		}

		#chat-form input {
			flex: 1;
			padding: 14px 20px;
			border: 1px solid var(--border-color);
			border-radius: 25px;
			background: var(--input-bg);
			color: var(--text-color);
			font-size: 1em;
			transition: border-color 0.2s;
		}

		#chat-form input:focus {
			outline: none;
			border-color: var(--accent-h1);
		}

		#action-btn {
			border-radius: 50%;
			width: 48px;
			height: 48px;
			padding: 0;
			flex: 0 0 auto;
		}

		/* User Bar Top */
		.user-bar {
			background: #1e293b;
			color: white;
			padding: 8px 16px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			font-size: 0.85em;
			z-index: 1000;
		}

		/* Utilities */
		.pinned-bar {
			background: var(--accent-ui);
			padding: 8px 16px;
			border-left: 4px solid var(--accent-h1);
			font-size: 0.85em;
			display: none;
			margin: 8px 24px;
			border-radius: 4px;
		}

		#typing-indicator {
			padding: 4px 24px;
			font-size: 0.8em;
			color: var(--primary-color);
			font-style: italic;
			min-height: 1.5em;
		}

		/* Custom Settings Modal */
		.modal {
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
			background: rgba(0, 0, 0, 0.4);
			backdrop-filter: blur(4px);
			display: none;
			align-items: center;
			justify-content: center;
			z-index: 2000;
		}

		.modal-content {
			background: var(--chat-bg);
			padding: 32px;
			border-radius: var(--radius-lg);
			width: 90%;
			max-width: 400px;
			box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
		}

		.date-header {
			text-align: center;
			margin: 20px 0;
			font-size: 0.7em;
			font-weight: 700;
			text-transform: uppercase;
			color: var(--primary-color);
			position: relative;
		}

		.date-header::before {
			content: '';
			position: absolute;
			left: 0;
			right: 0;
			top: 50%;
			height: 1px;
			background: var(--border-color);
		}

		.date-header span {
			background: var(--bg-color);
			padding: 0 12px;
			position: relative;
		}
	</style>
</head>

<body>
	<div class="user-bar" id="user-bar">
		<div style="display:flex; align-items:center; gap:8px;">
			<span id="user-display-name">Guest</span>
			<span id="guest-badge"
				style="background:#475569; padding:2px 6px; border-radius:4px; font-size:0.8em;">GUEST</span>
			<span id="logged-in-badge"
				style="background:#15803d; padding:2px 6px; border-radius:4px; font-size:0.8em; display:none;">LOGGED
				IN</span>
		</div>
		<div style="display:flex; gap:12px;">
			<button class="small-btn" id="settings-btn"
				style="background:transparent; border:none; padding:0; font-size:1.2em;">‚öôÔ∏è</button>
			<button id="signout-btn">Sign Out</button>
		</div>
	</div>

	<div id="connection-status"
		style="position:fixed; top:40px; left:0; right:0; text-align:center; padding:4px; font-size:0.8em; z-index:900; background:#f59e0b; color:white; display:none;">
		Connecting...</div>

	<div id="room-selection">
		<h1>RoundChat</h1>
		<div id="room-selection-form">
			<input type="text" id="room-input" placeholder="Enter Room Name" autofocus>
			<input type="text" id="name-input" placeholder="Your Display Name">
			<button id="join-room-btn" style="height:56px; border-radius:16px; font-size:1.1em;">Start Chatting</button>
		</div>
	</div>

	<div id="chat-interface">
		<header>
			<h1 id="header-title">üåç World Chat</h1>
			<div class="room-info">
				<div id="passkey-display" style="display:none;">üîë <span id="pk-val"></span></div>
				<button id="clear-btn" class="logout-btn" style="padding:6px 12px; font-size:0.8em;">Clear
					History</button>
			</div>
		</header>

		<div id="online-users"></div>

		<div id="pinned-message-bar" class="pinned-bar">
			<span>üìå Pinned:</span>
			<div id="pinned-message-content"
				style="flex:1; overflow:hidden; text-overflow:ellipsis; white-space:nowrap;"></div>
			<button id="unpin-btn"
				style="background:transparent; color:#ef4444; border:none; font-size:1.2em;">√ó</button>
		</div>

		<ul id="messages"></ul>

		<div id="typing-indicator"></div>

		<div id="chat-form-container">
			<div id="form-status"></div>
			<div id="chat-form">
				<input type="text" id="main-input" placeholder="Type your message..." autocomplete="off">
				<button id="action-btn">üöÄ</button>
			</div>
		</div>
	</div>

	<div class="modal" id="settings-modal">
		<div class="modal-content">
			<h2 style="margin-top:0;">Settings</h2>
			<div style="margin-bottom:20px;">
				<label style="display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
					<span>Dark Mode</span>
					<input type="checkbox" id="dark-mode-toggle" style="width:20px; height:20px;">
				</label>
			</div>
			<div style="margin-bottom:24px;">
				<label style="display:flex; justify-content:space-between; align-items:center; cursor:pointer;">
					<span>Browser Notifications</span>
					<input type="checkbox" id="notifications-toggle" style="width:20px; height:20px;">
				</label>
			</div>
			<button id="close-settings" style="width:100%;">Close</button>
		</div>
	</div>

	<audio id="notif-sound" src="https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3"></audio>

	<script src="script.js"></script>
</body>

</html>